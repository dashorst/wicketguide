<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.1">
<meta name="author" content="The Apache Software Foundation">
<title>Wicket 6.x Reference Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Wicket 6.x Reference Guide</h1>
<div class="details">
<span id="author" class="author">The Apache Software Foundation</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_colophon">Colophon</a></li>
<li><a href="#_preface">Preface</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a></li>
<li><a href="#_about_this_guide">About this Guide</a></li>
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_working_with_ajax">2. Working with Ajax</a>
<ul class="sectlevel2">
<li><a href="#_how_to_use_ajax_components_and_behaviors">2.1. How to use AJAX components and behaviors</a></li>
<li><a href="#_built_in_ajax_components">2.2. Built-in AJAX Components</a></li>
<li><a href="#_built_in_ajax_behaviours">2.3. Built-in AJAX Behaviours</a></li>
<li><a href="#_using_an_activity_indicator">2.4. Using an Activity Indicator</a></li>
<li><a href="#_ajax_request_attributes_and_call_listeners">2.5. AJAX Request Attributes and Call Listeners</a></li>
<li><a href="#_create_a_custom_ajax_call_listener">2.6. Create a Custom AJAX Call Listener</a></li>
<li><a href="#_summary">2.7. Summary</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The up-to-date guide with everything you wanted to know about Apache Wicket but were afraid to ask or too lazy to google for. Wicket is a component oriented, open source, Java web framework.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_colophon"><a class="link" href="#_colophon">Colophon</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright &#169; 2014 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. Apache and the Apache feather logo, Apache Wicket, Wicket and the Wicket logo are trademarks of The Apache Software Foundation.</p>
</div>
<div class="paragraph">
<p>Generated by Asciidoctor (<a href="http://asciidoctor.org" class="bare">http://asciidoctor.org</a>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Copyright 2014 the Apache Software Foundation

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="link" href="#_preface">Preface</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Wicket has been around since 2004 and it has been an Apache project since 2007. During these years it has proved to be a solid and valuable solution for building enterprise web applications.</p>
</div>
<div class="paragraph">
<p>Wicket core developers have done a wonderful job with this framework and they continue to improve it release after release. However Wicket never provided a freely available documentation and even if you can find on Internet many live examples and many technical articles on it (most of them at Wicket Library and at Wicket in Action ), the lack of an organized and freely available documentation has always been a sore point for this framework.</p>
</div>
<div class="paragraph">
<p>That&#8217;s quite an issue because many other popular frameworks (like Spring, Hibernate or Struts) offer a vast and very good documentation which substantially contributed to their success.</p>
</div>
<div class="paragraph">
<p>This document is not intended to be a complete reference for Wicket but it simply aims to be a straightforward introduction to the framework that should significantly reduce its learning curve. What you will find here reflects my experience with Wicket and it&#8217;s strictly focused on the framework. The various Wicket-related topics are gradually introduced using pragmatic examples of code that you can find in the according repository on Github.</p>
</div>
<div class="paragraph">
<p>However remember that Wicket is a vast and powerful tool, so you should feel confident with the topics exposed in this document before starting to code your real applications!</p>
</div>
<div class="paragraph">
<p>For those who need further documentation on Wicket, there are many good books available for this framework.</p>
</div>
<div class="paragraph">
<p>Hope you&#8217;ll find this guide helpful. Have fun with Wicket!</p>
</div>
<div class="paragraph">
<p>Andrea Del Bene, <a href="mailto:adelbene@apache.org">adelbene@apache.org</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="link" href="#_acknowledgements">Acknowledgements</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;d like to thank the following contributors for their work on this manual: Andrea Del Bene, Martin Grigorov, Carsten Hufe, Christian Kroemer, Daniel Bartl, Paul Borș.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about_this_guide"><a class="link" href="#_about_this_guide">About this Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide is based on Wicket 6. However if you are using an older version you should find this guide useful as well, but it&#8217;s likely that the code and the snippets won&#8217;t work with your version.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="link" href="#_introduction">1. Introduction</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_working_with_ajax"><a class="link" href="#_working_with_ajax">2. Working with Ajax</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Wicket support for AJAX is implemented in file <em>wicket-ajax-jquery.js</em> which makes complete transparent to Java code any detail about AJAX communication.</p>
</div>
<div class="sect2">
<h3 id="_how_to_use_ajax_components_and_behaviors"><a class="link" href="#_how_to_use_ajax_components_and_behaviors">2.1. How to use AJAX components and behaviors</a></h3>
<div class="paragraph">
<p>AJAX components and behaviors shipped with Wicket expose one or more callback methods which are executed when they receive an AJAX request. One of the arguments of these methods is an instance of interface <code>org.apache.wicket.ajax.AjaxRequestTarget</code>.</p>
</div>
<div class="paragraph">
<p>For example component AjaxLink (in package <code>org.apache.wicket.ajax.markup.html</code>) defines abstract method <code>onClick(AjaxRequestTarget target)`</code> which is executed when user clicks on the component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">new</span> AjaxLink(<span class="string"><span class="delimiter">&quot;</span><span class="content">ajaxLink</span><span class="delimiter">&quot;</span></span>) {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onClick(AjaxRequestTarget target) {
        <span class="comment">//some server side code...</span>
    }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using AjaxRequestTarget we can specify the content that must be sent back to the client as response to the current AJAX request. The most commonly used method of this interface is probably @add(Component&#8230;&#8203; components)@. With this method we tell Wicket to render again the specified components and refresh their markup via AJAX:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">new</span> AjaxLink(<span class="string"><span class="delimiter">&quot;</span><span class="content">ajaxLink</span><span class="delimiter">&quot;</span></span>){
  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> onClick(AjaxRequestTarget target) {
      <span class="comment">//modify the model of a label and refresh it on browser</span>
      label.setDefaultModelObject(<span class="string"><span class="delimiter">&quot;</span><span class="content">Another value 4 label.</span><span class="delimiter">&quot;</span></span>);
      target.add(label);
  }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Components can be refreshed via Ajax only if they have rendered a markup id for their related tag. As a consequence, we must remember to set a valid id value on every component we want to add to @AjaxRequestTarget@. This can be done using one of the two methods seen in paragraph 4.3:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">final</span> <span class="predefined-type">Label</span> label = <span class="keyword">new</span> <span class="predefined-type">Label</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">labelComponent</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Initial value.</span><span class="delimiter">&quot;</span></span>);
<span class="comment">//autogenerate a markup id</span>
label.setOutputMarkupId(<span class="predefined-constant">true</span>);
add(label);
<span class="comment">//...</span>
<span class="keyword">new</span> AjaxLink(<span class="string"><span class="delimiter">&quot;</span><span class="content">ajaxLink</span><span class="delimiter">&quot;</span></span>){
  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> onClick(AjaxRequestTarget target) {
      <span class="comment">//modify the model of a label and refresh it on client side</span>
      label.setDefaultModelObject(<span class="string"><span class="delimiter">&quot;</span><span class="content">Another value 4 label.</span><span class="delimiter">&quot;</span></span>);
      target.add(label);
  }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another common use of AjaxRequestTarget is to prepend or append some JavaScript code to the generated response. For example the following AJAX link displays an alert box as response to user&#8217;s click:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">new</span> AjaxLink(<span class="string"><span class="delimiter">&quot;</span><span class="content">ajaxLink</span><span class="delimiter">&quot;</span></span>){
  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> onClick(AjaxRequestTarget target) {
      target.appendJavaScript(<span class="string"><span class="delimiter">&quot;</span><span class="content">;alert('Hello!!');</span><span class="delimiter">&quot;</span></span>);
  }
};</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Repeaters component that have <code>org.apache.wicket.markup.repeater.AbstractRepeater</code> as base class (like <code>ListView</code>, <code>RepeatingView</code>, etc&#8230;&#8203;) can not be directly updated via AJAX.</p>
</div>
<div class="paragraph">
<p>If we want to refresh their markup via AJAX we must add one of their parent containers to the <code>AjaxRequestTarget</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_built_in_ajax_components"><a class="link" href="#_built_in_ajax_components">2.2. Built-in AJAX Components</a></h3>
<div class="paragraph">
<p>Wicket distribution comes with a number of built-in AJAX components ready to be used. Some of them are the ajaxified version of common components like links and buttons, while others are AJAX-specific components.</p>
</div>
<div class="paragraph">
<p>AJAX components are not different from any other component seen so far and they don&#8217;t require any additional configuration to be used. As we will shortly see, switching from a classic link or button to the ajaxified version is just a matter of appending “Ajax” to the component class name.</p>
</div>
<div class="paragraph">
<p>This section provides an overview of what we can find in Wicket to start writing AJAX-enhanced web applications.</p>
</div>
<div class="sect3">
<h4 id="_links_and_buttons"><a class="link" href="#_links_and_buttons">2.2.1. Links and buttons</a></h4>
<div class="paragraph">
<p>In the previous paragraph we have already introduced component AjaxLink. Wicket provides also the ajaxified versions of submitting components SubmitLink and Button which are simply called AjaxSubmitLink and AjaxButton. These components come with a version of methods onSubmit, onError and onAfterSubmit that takes in input also an instance of <code>AjaxRequestTarget</code>.</p>
</div>
<div class="paragraph">
<p>Both components are in package <code>org.apache.wicket.ajax.markup.html.form</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fallback_components"><a class="link" href="#_fallback_components">2.2.2. Fallback components</a></h4>
<div class="paragraph">
<p>Building an entire site using AJAX can be risky as some clients may not support this technology. In order to provide an usable version of our site also to these clients, we can use components <code>AjaxFallbackLink</code> and <code>AjaxFallbackButton</code> which are able to automatically degrade to a standard link or to a standard button if client doesn&#8217;t support AJAX.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ajax_checkbox"><a class="link" href="#_ajax_checkbox">2.2.3. AJAX Checkbox</a></h4>
<div class="paragraph">
<p>Class <code>org.apache.wicket.ajax.markup.html.form.AjaxCheckBox</code> is a checkbox component that updates its model via AJAX when user changes its value. Its AJAX callback method is <code>$1</code>. The component extends standard checkbox component <code>CheckBox</code> adding an <code>AjaxFormComponentUpdatingBehavior</code> to itself (we will see this behavior later in paragraph 16.3.3).</p>
</div>
</div>
<div class="sect3">
<h4 id="_ajax_editable_labels"><a class="link" href="#_ajax_editable_labels">2.2.4. AJAX editable labels</a></h4>
<div class="paragraph">
<p>An editable label is a special label that can be edited by the user when she/he clicks on it. Wicket ships three different implementations for this component (all inside package <code>org.apache.wicket.extensions.ajax.markup.html</code>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>AjaxEditableLabel</strong>: it&#8217;s a basic version of editable label. User can edit the content of the label with a text field. This is also the base class for the other two editable labels.</p>
</li>
<li>
<p><strong>AjaxEditableMultiLineLabel</strong>: this label supports multi-line values and uses a text area as editor component.</p>
</li>
<li>
<p><strong>AjaxEditableChoiceLabel</strong>: this label uses a drop-down menu to edit its value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Base component AjaxEditableLabel exposes the following set of AJAX-aware methods that can be overriden:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>onEdit(AjaxRequestTarget target)</strong>: called when user clicks on component. The default implementation shows the component used to edit the value of the label.</p>
</li>
<li>
<p><strong>onSubmit(AjaxRequestTarget target)</strong>: called when the value has been successfully updated with the new input.</p>
</li>
<li>
<p><strong>onError(AjaxRequestTarget target)</strong>: called when the new inserted input has failed validation.</p>
</li>
<li>
<p><strong>onCancel(AjaxRequestTarget target)</strong>: called when user has exited from editing mode pressing escape key. The default implementation brings back the label to its initial state hiding the editor component.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Wicket module wicket-examples contains page class <code>EditableLabelPage.java</code> which shows all these three components together. You can see this page in action at "http://www.wicket-library.com/wicket-examples-6.0.x/ajax/editable-label":http://www.wicket-library.com/wicket-examples-6.0.x/ajax/editable-label :</p>
</div>
<div class="paragraph">
<p>!edit-label-example-screenshot.png!</p>
</div>
</div>
<div class="sect3">
<h4 id="_autocomplete_text_field"><a class="link" href="#_autocomplete_text_field">2.2.5. Autocomplete text field</a></h4>
<div class="paragraph">
<p>On Internet we can find many examples of text fields that display a list of suggestions (or options) while the user types a text inside them. This feature is known as autocomplete functionality.</p>
</div>
<div class="paragraph">
<p>Wicket offers an out-of-the-box implementation of an autocomplete text field with component <code>org.apache.wicket.extensions.ajax.markup.html.autocomplete.AutoCompleteTextField</code>.</p>
</div>
<div class="paragraph">
<p>When using AutoCompleteTextField we are required to implement its abstract method getChoices(String input) where the input parameter is the current input of the component. This method returns an iterator over the suggestions that will be displayed as a drop-down menu:</p>
</div>
<div class="paragraph">
<p>!autocomplete-example-screenshot.png!</p>
</div>
<div class="paragraph">
<p>Suggestions are rendered using a render which implements interface <code>IAutoCompleteRenderer</code>. The default implementation simply calls toString() on each suggestion object. If we need to work with a custom render we can specify it via component constructor.</p>
</div>
<div class="paragraph">
<p>AutoCompleteTextField supports a wide range of settings that are passed to its constructor with class <code>AutoCompleteSettings</code>.</p>
</div>
<div class="paragraph">
<p>One of the most interesting parameter we can specify for <code>AutoCompleteTextField</code> is the throttle delay which is the amount of time (in milliseconds) that must elapse between a change of input value and the transmission of a new Ajax request to display suggestions. This parameter can be set with method <code>$1</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AutoCompleteSettings settings = <span class="keyword">new</span> AutoCompleteSettings();
<span class="comment">//set throttle to 400 ms: component will wait 400ms before displaying the options</span>
settings.setThrottleDelay(<span class="integer">400</span>);
<span class="comment">//...</span>
AutoCompleteTextField field = <span class="keyword">new</span> AutoCompleteTextField&lt;T&gt;(<span class="string"><span class="delimiter">&quot;</span><span class="content">field</span><span class="delimiter">&quot;</span></span>, model) {

        <span class="annotation">@Override</span>
        <span class="directive">protected</span> <span class="predefined-type">Iterator</span> getChoices(<span class="predefined-type">String</span> arg0) {
                <span class="comment">//return an iterator over the options</span>
        }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wicket module wicket-examples contains page class <code>AutoCompletePagePage.java</code> which shows an example of autocomplete text field. The running example is available at "http://www.wicket-library.com/wicket-examples-6.0.x/ajax/autocomplete":http://www.wicket-library.com/wicket-examples-6.0.x/ajax/autocomplete .</p>
</div>
</div>
<div class="sect3">
<h4 id="_modal_window"><a class="link" href="#_modal_window">2.2.6. Modal window</a></h4>
<div class="paragraph">
<p>Class <code>org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow</code> is an implementation of a "modal window":http://en.wikipedia.org/wiki/Modal_window based on AJAX:</p>
</div>
<div class="paragraph">
<p>!modal-window-example-screenshot.png!</p>
</div>
<div class="paragraph">
<p>The content of a modal window can be either another component or a page. In the first case the id of the  component used as content must be retrieved with method getContentId().</p>
</div>
<div class="paragraph">
<p>If instead we want to use a page as window content, we must implement the inner interface <code>ModalWindow.PageCreator</code> and pass it to method <code>setPageCreator</code>. The page used as content will be embedded in a &lt;iframe&gt; tag.</p>
</div>
<div class="paragraph">
<p>To display a modal window we must call its method <code>$1</code>. This is  usually done inside the AJAX callback method of another component (like an <code>AjaxLink</code>). The following markup and code are taken from project <code>BasicModalWindowExample</code> and illustrate a basic usage of a modal window:</p>
</div>
<div class="paragraph">
<p><strong>HTML:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h2&gt;</span>Modal Windod example<span class="tag">&lt;/h2&gt;</span>
        <span class="tag">&lt;a</span> <span class="attribute-name">wicket:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">openWindow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Open the window!<span class="tag">&lt;/a&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">wicket:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">modalWindow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/body&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Java Code:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> HomePage(<span class="directive">final</span> PageParameters parameters) {
           <span class="local-variable">super</span>(parameters);
           <span class="directive">final</span> ModalWindow modalWindow = <span class="keyword">new</span> ModalWindow(<span class="string"><span class="delimiter">&quot;</span><span class="content">modalWindow</span><span class="delimiter">&quot;</span></span>);
           <span class="predefined-type">Label</span> label = <span class="keyword">new</span> <span class="predefined-type">Label</span>(modalWindow.getContentId(), <span class="string"><span class="delimiter">&quot;</span><span class="content">I'm a modal window!</span><span class="delimiter">&quot;</span></span>);

           modalWindow.setContent(label);
           modalWindow.setTitle(<span class="string"><span class="delimiter">&quot;</span><span class="content">Modal window</span><span class="delimiter">&quot;</span></span>);

           add(modalWindow);
           add(<span class="keyword">new</span> AjaxLink(<span class="string"><span class="delimiter">&quot;</span><span class="content">openWindow</span><span class="delimiter">&quot;</span></span>) {
          <span class="annotation">@Override</span>
          <span class="directive">public</span> <span class="type">void</span> onClick(AjaxRequestTarget target) {
                modalWindow.show(target);
          }
        });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Just like any other component also <code>ModalWindow</code> must be added to a markup tag, like we did in our example using a &lt;div&gt; tag. Wicket will automatically hide this tag in the final markup appending the style value <code>display:none</code>.
The component provides different setter methods to customize the appearance of the window:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>setTitle(String)</strong>: specifies the title of the window</p>
</li>
<li>
<p><strong>setResizable(boolean)</strong>: by default the window is resizeable. If we need to make its size fixed we can use this method to turn off this feature.</p>
</li>
<li>
<p><strong>setInitialWidth(int) and setInitialHeight(int)</strong>: set the initial dimensions of the window.</p>
</li>
<li>
<p><strong>setMinimalWidth(int) and setMinimalHeight(int)</strong>: specify the minimal dimensions of the window.</p>
</li>
<li>
<p><strong>setCookieName(String)</strong>: this method can be used to specify the name of the cookie used on  client side to store size and position of the window when it is closed. The component will use this cookie to restore these two parameters the next time the window will be opened. If no cookie name is provided, the component will not remember its last position and size.</p>
</li>
<li>
<p><strong>setCssClassName(String)</strong>: specifies the CSS class used for the window.</p>
</li>
<li>
<p><strong>setAutoSize(boolean)</strong>: when this flag is set to true the window will automatically adjust its size to fit content width and height. By default it is false.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The modal window can be closed from code using its method <code>$1</code>. The currently opened window can be closed also with the following JavaScript instruction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Wicket.Window.get().close();</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ModalWindow</code> gives the opportunity to perform custom actions when window is closing. Inner interface <code>ModalWindow.WindowClosedCallback</code> can be implemented and passed to window&#8217;s method <code>setWindowClosedCallback</code> to specify the callback that must be executed after window has been closed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">modalWindow.setWindowClosedCallback(<span class="keyword">new</span> ModalWindow.WindowClosedCallback() {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="type">void</span> onClose(AjaxRequestTarget target) {
          <span class="comment">//custom code...</span>
        }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tree_repeaters"><a class="link" href="#_tree_repeaters">2.2.7. Tree repeaters</a></h4>
<div class="paragraph">
<p>Class <code>org.apache.wicket.extensions.markup.html.repeater.tree.AbstractTree</code> is the base class of another family of repeaters called tree repeaters and designed to display a data hierarchy as a tree, resembling the behavior and the look &amp; feel of desktop tree components. A classic example of tree component on desktop is the tree used by nearly all file managers to navigate file system:</p>
</div>
<div class="paragraph">
<p>!file-system-trees.png!</p>
</div>
<div class="paragraph">
<p>Because of their highly interactive nature, tree repeaters are implemented as AJAX components,  meaning that they are updated via AJAX when we expand or collapse their nodes.</p>
</div>
<div class="paragraph">
<p>The basic implementation of a tree repeater shipped with Wicket is component <code>NestedTree</code>. In order to use a tree repeater we must provide an implementation of interface <code>ITreeProvider</code> which is in charge of returning the nodes that compose the tree.</p>
</div>
<div class="paragraph">
<p>Wicket comes with a built-in implementation of ITreeProvider called TreeModelProvider that works with the same tree model and nodes used by Swing component <code>javax.swing.JTree</code>. These Swing entities should be familiar to you if you have previously worked with the old tree repeaters (components <code>Tree</code> and <code>TreeTable</code>) that have been deprecated with Wicket 6 and that are strongly dependent on Swing-based model and nodes. <code>TreeModelProvider</code> can be used to migrate your code to the new tree repeaters.</p>
</div>
<div class="paragraph">
<p>In the next example (project <code>CheckBoxAjaxTree</code>) we will build a tree that displays some of the main cities of three European countries: Italy, Germany and France. The cities are sub-nodes of a main node representing the relative county. The nodes of the final tree will be also selectable with a checkbox control. The whole tree will have the classic look &amp; feel of Windows XP. This is how our tree will look like:</p>
</div>
<div class="paragraph">
<p>!AJAX-tree-repeater.png!</p>
</div>
<div class="paragraph">
<p>We will start to explore the code of this example from the home page. The first portion of code we will see is where we build the nodes and the <code>TreeModelProvider</code> for the three. As tree node we will use Swing class <code>javax.swing.tree.DefaultMutableTreeNode</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">HomePage</span> <span class="directive">extends</span> WebPage {
    <span class="directive">public</span> HomePage(<span class="directive">final</span> PageParameters parameters) {
     <span class="local-variable">super</span>(parameters);
     <span class="predefined-type">DefaultMutableTreeNode</span> root = <span class="keyword">new</span> <span class="predefined-type">DefaultMutableTreeNode</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Cities of Europe</span><span class="delimiter">&quot;</span></span>);

     addNodes(addNodes(root, <span class="string"><span class="delimiter">&quot;</span><span class="content">Italy</span><span class="delimiter">&quot;</span></span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">Rome</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Venice</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Milan</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Florence</span><span class="delimiter">&quot;</span></span>);
     addNodes(addNodes(root, <span class="string"><span class="delimiter">&quot;</span><span class="content">Germany</span><span class="delimiter">&quot;</span></span>),<span class="string"><span class="delimiter">&quot;</span><span class="content">Stuttgart</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Munich</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Berlin</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Dusseldorf</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Dresden</span><span class="delimiter">&quot;</span></span>);
     addNodes(addNodes(root, <span class="string"><span class="delimiter">&quot;</span><span class="content">France</span><span class="delimiter">&quot;</span></span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">Paris</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Toulouse</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Strasbourg</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Bordeaux</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Lyon</span><span class="delimiter">&quot;</span></span>);

     <span class="predefined-type">DefaultTreeModel</span> treeModel = <span class="keyword">new</span> <span class="predefined-type">DefaultTreeModel</span>(root);
     TreeModelProvider&lt;<span class="predefined-type">DefaultMutableTreeNode</span>&gt; modelProvider = <span class="keyword">new</span>
                            TreeModelProvider&lt;<span class="predefined-type">DefaultMutableTreeNode</span>&gt;( treeModel ){
       <span class="annotation">@Override</span>
       <span class="directive">public</span> IModel&lt;<span class="predefined-type">DefaultMutableTreeNode</span>&gt; model(<span class="predefined-type">DefaultMutableTreeNode</span> object){
          <span class="keyword">return</span> Model.of(object);
       }
     };
     <span class="comment">//To be continued...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nodes have been built using simple strings as data objects and invoking custom utility method addNodes which converts string parameters into children nodes for a given parent node. Once we have our tree of <code>DefaultMutableTreeNodes</code> we can build the Swing tree model (<code>DefaultTreeModel</code>) that will be the backing object for a <code>TreeModelProvider</code>. This provider wraps each node in a model invoking its abstract method model. In our example we have used a simple <code>Model</code> as wrapper model.</p>
</div>
<div class="paragraph">
<p>Scrolling down the code we can see how the tree component is instantiated and configured before being added to the home page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//Continued from previous snippet...</span>
 NestedTree&lt;<span class="predefined-type">DefaultMutableTreeNode</span>&gt; tree = <span class="keyword">new</span> NestedTree&lt;<span class="predefined-type">DefaultMutableTreeNode</span>&gt;(<span class="string"><span class="delimiter">&quot;</span><span class="content">tree</span><span class="delimiter">&quot;</span></span>,
                                                      modelProvider)
  {

   <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="predefined-type">Component</span> newContentComponent(<span class="predefined-type">String</span> id, IModel&lt;<span class="predefined-type">DefaultMutableTreeNode</span>&gt;model)
   {
     <span class="keyword">return</span> <span class="keyword">new</span> CheckedFolder&lt;<span class="predefined-type">DefaultMutableTreeNode</span>&gt;(id, <span class="local-variable">this</span>, model);
   }
  };
  <span class="comment">//select Windows theme</span>
  tree.add(<span class="keyword">new</span> WindowsTheme());

  add(tree);
  }
  <span class="comment">//implementation of addNodes</span>
  <span class="comment">//...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use tree repeaters we must implement their abstract method <code>newContentComponent</code> which is called internally by base class <code>AbstractTree</code> when a new node must be built. As content component we have used built-in class <code>CheckedFolder</code> which combines a <code>Folder</code> component with a <code>CheckBox</code> form control.</p>
</div>
<div class="paragraph">
<p>The final step before adding the tree to its page is to apply a theme to it. Wicket comes with two behaviors, WindowsTheme and HumanTheme, which correspond to the classic Windows XP theme and to the Human theme from Ubuntu.</p>
</div>
<div class="paragraph">
<p>Our checkable tree is finished but our work is not over yet because the component doesn&#8217;t offer many functionalities as it is. Unfortunately neither NestedTree nor CheckedFolder provide a means for collecting checked nodes and returning them to client code. It&#8217;s up to us to implement a way to keep track of checked nodes.</p>
</div>
<div class="paragraph">
<p>Another nice feature we would like to implement for our tree is the following user-friendly behavior that should occur when a user checks/unchecks a node:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When a node is checked also all its children nodes (if any) must be checked. We must also ensure that all the ancestors of the checked node (root included) are checked, otherwise we would get an inconsistent selection.</p>
</li>
<li>
<p>When a node is unchecked also all its children nodes (if any) must be unchecked and we must also ensure that ancestors get unchecked if they have no more checked children.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first goal (keeping track of checked node) can be accomplished building a custom version of <code>CheckedFolder</code> that uses a shared Java Set to store checked node and to verify if its node has been  checked. This kind of solution requires a custom model for checkbox component in order to reflect its checked status when its container node is rendered. This model must implement typed interface <code>$1</code> and must be returned by <code>CheckedFolder&#8217;s method `newCheckBoxModel</code>.</p>
</div>
<div class="paragraph">
<p>For the second goal (auto select/unselect children and ancestor nodes) we can use `CheckedFolder&#8217;s callback method onUpdate(AjaxRequestTarget) that is invoked after a checkbox is clicked and its value has been updated. Overriding this method we can handle user click adding/removing nodes to/from the Java Set.</p>
</div>
<div class="paragraph">
<p>Following this implementation plan we can start coding our custom <code>CheckedFolder</code> (named <code>AutocheckedFolder</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">AutocheckedFolder</span>&lt;T&gt; <span class="directive">extends</span> CheckedFolder&lt;T&gt; {

   <span class="directive">private</span> ITreeProvider&lt;T&gt; treeProvider;
   <span class="directive">private</span> IModel&lt;<span class="predefined-type">Set</span>&lt;T&gt;&gt; checkedNodes;
   <span class="directive">private</span> IModel&lt;<span class="predefined-type">Boolean</span>&gt; checkboxModel;

   <span class="directive">public</span> AutocheckedFolder(<span class="predefined-type">String</span> id, AbstractTree&lt;T&gt; tree,
                        IModel&lt;T&gt; model, IModel&lt;<span class="predefined-type">Set</span>&lt;T&gt;&gt; checkedNodes) {
      <span class="local-variable">super</span>(id, tree, model);
      <span class="local-variable">this</span>.treeProvider = tree.getProvider();
      <span class="local-variable">this</span>.checkedNodes = checkedNodes;
   }

   <span class="annotation">@Override</span>
   <span class="directive">protected</span> IModel&lt;<span class="predefined-type">Boolean</span>&gt; newCheckBoxModel(IModel&lt;T&gt; model) {
      checkboxModel =  <span class="keyword">new</span> CheckModel();
      <span class="keyword">return</span> checkboxModel;
   }

   <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="type">void</span> onUpdate(AjaxRequestTarget target) {
      <span class="local-variable">super</span>.onUpdate(target);
      T node = getModelObject();
      <span class="type">boolean</span> nodeChecked = checkboxModel.getObject();

      addRemoveSubNodes(node, nodeChecked);
      addRemoveAncestorNodes(node, nodeChecked);
   }

  <span class="type">class</span> <span class="class">CheckModel</span> <span class="directive">extends</span> AbstractCheckBoxModel{
      <span class="annotation">@Override</span>
      <span class="directive">public</span> <span class="type">boolean</span> isSelected() {
         <span class="keyword">return</span> checkedNodes.getObject().contains(getModelObject());
      }

      <span class="annotation">@Override</span>
      <span class="directive">public</span> <span class="type">void</span> select() {
         checkedNodes.getObject().add(getModelObject());
      }

      <span class="annotation">@Override</span>
      <span class="directive">public</span> <span class="type">void</span> unselect() {
         checkedNodes.getObject().remove(getModelObject());
      }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The constructor of this new component takes in input a further parameter which is the set containing checked nodes.</p>
</div>
<div class="paragraph">
<p>Class CheckModel is the custom model we have implemented for checkbox control. As base class for this model we have used <code>AbstractCheckBoxModel</code> which is provided to implement custom models for checkbox controls.</p>
</div>
<div class="paragraph">
<p>Methods <code>addRemoveSubNodes</code> and <code>addRemoveAncestorNodes</code> are called to automatically add/remove children and ancestor nodes to/from the current Set. Their implementation is mainly focused on the navigation of tree nodes and it heavily depends on the internal implementation of the tree, so we won&#8217;t dwell on their code.</p>
</div>
<div class="paragraph">
<p>Now we are just one step away from completing our tree as we still have to find a way to update the checked status of both children and ancestors nodes on client side. Although we could easily accomplish this task by simply refreshing the whole tree via AJAX, we would like to find a better and more performant solution for this task.</p>
</div>
<div class="paragraph">
<p>When we modify the checked status of a node we don&#8217;t expand/collapse any node of the three so we can simply update the desired checkboxes rather than updating the entire tree component. This alternative approach could lead to a more responsive interface and to a strong reduction of bandwidth consumption.</p>
</div>
<div class="paragraph">
<p>With the help of JQuery we can code a couple of JavaScript functions that can be used to check/ uncheck all the children and ancestors of a given node. Then, we can append these functions to the current <code>AjaxRequest</code> at the end of method onUpdate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">   <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="type">void</span> onUpdate(AjaxRequestTarget target) {
      <span class="local-variable">super</span>.onUpdate(target);
      T node = getModelObject();
      <span class="type">boolean</span> nodeChecked = checkboxModel.getObject();

      addRemoveSubNodes(node, nodeChecked);
      addRemoveAncestorNodes(node, nodeChecked);
      updateNodeOnClientSide(target, nodeChecked);
   }

   <span class="directive">protected</span> <span class="type">void</span> updateNodeOnClientSide(AjaxRequestTarget target,
                        <span class="type">boolean</span> nodeChecked) {
      target.appendJavaScript(<span class="string"><span class="delimiter">&quot;</span><span class="content">;CheckAncestorsAndChildren.checkChildren('</span><span class="delimiter">&quot;</span></span> + getMarkupId() +
                              <span class="string"><span class="delimiter">&quot;</span><span class="content">',</span><span class="delimiter">&quot;</span></span> + nodeChecked + <span class="string"><span class="delimiter">&quot;</span><span class="content">);</span><span class="delimiter">&quot;</span></span>);

      target.appendJavaScript(<span class="string"><span class="delimiter">&quot;</span><span class="content">;CheckAncestorsAndChildren.checkAncestors('</span><span class="delimiter">&quot;</span></span> + getMarkupId() +
                              <span class="string"><span class="delimiter">&quot;</span><span class="content">',</span><span class="delimiter">&quot;</span></span> + nodeChecked + <span class="string"><span class="delimiter">&quot;</span><span class="content">);</span><span class="delimiter">&quot;</span></span>);
   }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JavaScript code can be found inside file autocheckedFolder.js which is added to the header section as package resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> renderHead(IHeaderResponse response) {
        PackageResourceReference scriptFile = <span class="keyword">new</span> PackageResourceReference(<span class="local-variable">this</span>.getClass(),
                                                      <span class="string"><span class="delimiter">&quot;</span><span class="content">autocheckedFolder.js</span><span class="delimiter">&quot;</span></span>);
        response.render(JavaScriptHeaderItem.forReference(scriptFile));
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_hidden_components"><a class="link" href="#_working_with_hidden_components">2.2.8. Working with hidden components</a></h4>
<div class="paragraph">
<p>When a component is not visible its markup and the related id attribute are not rendered in the final page, hence it can not be updated via AJAX. To overcome this problem we must use Component&#8217;s method <code>$1</code> which has the effect of rendering a hidden &lt;span&gt; tag containing the markup id of the hidden component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">final</span> <span class="predefined-type">Label</span> label = <span class="keyword">new</span> <span class="predefined-type">Label</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">labelComponent</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Initial value.</span><span class="delimiter">&quot;</span></span>);
<span class="comment">//make label invisible</span>
label.setVisible(<span class="predefined-constant">false</span>);
<span class="comment">//ensure that label will leave a placeholder for its markup id</span>
label.setOutputMarkupPlaceholderTag(<span class="predefined-constant">true</span>);
add(label);
<span class="comment">//...</span>
<span class="keyword">new</span> AjaxLink(<span class="string"><span class="delimiter">&quot;</span><span class="content">ajaxLink</span><span class="delimiter">&quot;</span></span>){
        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="type">void</span> onClick(AjaxRequestTarget target) {
            <span class="comment">//turn label to visible</span>
            label.setVisible(<span class="predefined-constant">true</span>);
            target.add(label);
        }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note that in the code above we didn&#8217;t invoked method <code>$1</code> as <code>setOutputMarkupPlaceholderTag</code> already does it internally.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_built_in_ajax_behaviours"><a class="link" href="#_built_in_ajax_behaviours">2.3. Built-in AJAX Behaviours</a></h3>
<div class="paragraph">
<p>In addition to specific components, Wicket offers also a set of built in AJAX behaviors that can be used to easily add AJAX functionalities to existing components. As we will see in this paragraph AJAX behaviors can be used also to ajaxify components that weren&#8217;t initially designed to work with this technology. All the following behaviors are inside package <code>org.apache.wicket.ajax</code>.</p>
</div>
<div class="sect3">
<h4 id="_ajaxeventbehavior"><a class="link" href="#_ajaxeventbehavior">2.3.1. AjaxEventBehavior</a></h4>
<div class="paragraph">
<p>AjaxEventBehavior allows to handle a JavaScript event (like click, change, etc&#8230;&#8203;) on server side via AJAX. Its constructor takes in input the name of the event that must be handled. Every time this event is fired for a given component on client side, the callback method @onEvent(AjaxRequestTarget target)@ is executed. onEvent is abstract, hence we must implement it to tell <code>AjaxEventBehavior</code> what to do when the specified event occurs.</p>
</div>
<div class="paragraph">
<p>In project <code>AjaxEventBehaviorExample</code> we used this behavior to build a “clickable” Label component that counts the number of clicks. Here is the code from the home page of the project:</p>
</div>
<div class="listingblock">
<div class="title">HTML code</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">wicket:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">clickCounterLabel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
    User has clicked <span class="tag">&lt;span</span> <span class="attribute-name">wicket:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">clickCounter</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/span&gt;</span> time/s on the label above.
<span class="tag">&lt;/body&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Java code</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">HomePage</span> <span class="directive">extends</span> WebPage {
    <span class="directive">public</span> HomePage(<span class="directive">final</span> PageParameters parameters) {
        <span class="local-variable">super</span>(parameters);

        <span class="directive">final</span> ClickCounterLabel clickCounterLabel =
            <span class="keyword">new</span> ClickCounterLabel(<span class="string"><span class="delimiter">&quot;</span><span class="content">clickCounterLabel</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Click on me!</span><span class="delimiter">&quot;</span></span>);
        <span class="directive">final</span> <span class="predefined-type">Label</span> clickCounter =
            <span class="keyword">new</span> <span class="predefined-type">Label</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">clickCounter</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> PropertyModel(clickCounterLabel, <span class="string"><span class="delimiter">&quot;</span><span class="content">clickCounter</span><span class="delimiter">&quot;</span></span>));


        clickCounterLabel.setOutputMarkupId(<span class="predefined-constant">true</span>);
        clickCounterLabel.add(<span class="keyword">new</span> AjaxEventBehavior(<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span>) {
            <span class="annotation">@Override</span>
            <span class="directive">protected</span> <span class="type">void</span> onEvent(AjaxRequestTarget target) {
                clickCounterLabel.clickCounter++;
                target.add(clickCounter);
            }
        });

        add(clickCounterLabel);
        add(clickCounter.setOutputMarkupId(<span class="predefined-constant">true</span>));
    }
}

<span class="type">class</span> <span class="class">ClickCounterLabel</span> <span class="directive">extends</span> <span class="predefined-type">Label</span> {
    <span class="directive">public</span> <span class="type">int</span> clickCounter;

    <span class="directive">public</span> ClickCounterLabel(<span class="predefined-type">String</span> id) {
        <span class="local-variable">super</span>(id);
    }

    <span class="directive">public</span> ClickCounterLabel(<span class="predefined-type">String</span> id, IModel&lt;?&gt; model) {
        <span class="local-variable">super</span>(id, model);
    }

    <span class="directive">public</span> ClickCounterLabel(<span class="predefined-type">String</span> id, <span class="predefined-type">String</span> label) {
        <span class="local-variable">super</span>(id, label);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the code above we have declared a custom label class named <code>ClickCounterLabel</code> that exposes a public integer field called clickCounter. Then, in the home page we have attached a <code>AjaxEventBehavior</code> to our custom label to increment clickCounter every time it receives a click event.</p>
</div>
<div class="paragraph">
<p>The number of clicks is displayed with another standard label named <code>clickCounter</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ajaxformsubmitbehavior"><a class="link" href="#_ajaxformsubmitbehavior">2.3.2. AjaxFormSubmitBehavior</a></h4>
<div class="paragraph">
<p>This behavior allows to send a form via AJAX when the component it is attached to receives the specified event. The component doesn&#8217;t need to be inside the form if we use the constructor version that, in addition to the name of the event, takes in input also the target form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Form form = <span class="keyword">new</span> Form(<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">Button</span> submitButton = <span class="keyword">new</span> <span class="predefined-type">Button</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitButton</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// submit form when button is clicked</span>
submitButton.add(<span class="keyword">new</span> AjaxFormSubmitBehavior(form, <span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span>){});
add(form);
add(submitButton);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ajaxformcomponentupdatingbehavior"><a class="link" href="#_ajaxformcomponentupdatingbehavior">2.3.3. AjaxFormComponentUpdatingBehavior</a></h4>
<div class="paragraph">
<p>This behavior updates the model of the form component it is attached to when a given event occurs. The standard form submitting process is skipped and the behavior validates only its form component.</p>
</div>
<div class="paragraph">
<p>The behavior doesn&#8217;t work with radio buttons and checkboxes. For these kinds of components we must use <code>AjaxFormChoiceComponentUpdatingBehavior</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Form form = <span class="keyword">new</span> Form(<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">TextField</span> textField = <span class="keyword">new</span> <span class="predefined-type">TextField</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">textField</span><span class="delimiter">&quot;</span></span>, Model.of(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>));
<span class="comment">//update the model of the text field each time event &quot;change&quot; occurs</span>
textField.add(<span class="keyword">new</span> AjaxFormComponentUpdatingBehavior(<span class="string"><span class="delimiter">&quot;</span><span class="content">change</span><span class="delimiter">&quot;</span></span>){
        <span class="annotation">@Override</span>
        <span class="directive">protected</span> <span class="type">void</span> onUpdate(AjaxRequestTarget target) {
                <span class="comment">//...</span>
        }
});
add(form.add(textField));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abstractajaxtimerbehavior"><a class="link" href="#_abstractajaxtimerbehavior">2.3.4. AbstractAjaxTimerBehavior</a></h4>
<div class="paragraph">
<p><code>AbstractAjaxTimerBehavior</code> executes callback method @onTimer(AjaxRequestTarget target)@ at a specified interval. The behavior can be stopped and restarted at a later time with methods @stop(AjaxRequestTarget target)@ and @restart(AjaxRequestTarget target)@:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Label</span> dynamicLabel = <span class="keyword">new</span> <span class="predefined-type">Label</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">dynamicLabel</span><span class="delimiter">&quot;</span></span>);
<span class="comment">//trigger an AJAX request every three seconds</span>
dynamicLabel.add(<span class="keyword">new</span> AbstractAjaxTimerBehavior(<span class="predefined-type">Duration</span>.seconds(<span class="integer">3</span>)) {
        <span class="annotation">@Override</span>
        <span class="directive">protected</span> <span class="type">void</span> onTimer(AjaxRequestTarget target) {
                <span class="comment">//...</span>
        }
});
add(dynamicLabel);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_an_activity_indicator"><a class="link" href="#_using_an_activity_indicator">2.4. Using an Activity Indicator</a></h3>
<div class="paragraph">
<p>One of the things we must take care of when we use AJAX is to notify user when an AJAX request is already in progress. This is usually done displaying an animated picture as activity indicator while the AJAX request is running.</p>
</div>
<div class="paragraph">
<p>Wicket comes with a variant of components <code>AjaxButton</code>, <code>AjaxLink</code> and <code>AjaxFallbackLink</code> that display a default activity indicator during AJAX request processing. These components are respectively <code>IndicatingAjaxButton</code>, <code>IndicatingAjaxLink</code> and <code>IndicatingAjaxFallbackLink</code>.</p>
</div>
<div class="paragraph">
<p>The default activity indicator used in Wicket can be easily integrated in our components using behavior AjaxIndicatorAppender (available in package <code>org.apache.wicket.extensions.ajax.markup.html</code>) and implementing the interface <code>IAjaxIndicatorAware</code> (in package <code>org.apache.wicket.ajax</code>).</p>
</div>
<div class="paragraph">
<p><code>IAjaxIndicatorAware</code> declares method <code>getAjaxIndicatorMarkupId()</code> which returns the id of the markup element used to display the activity indicator. This id can be obtained from the AjaxIndicatorAppender behavior that has been added to the current component. The following code snippet summarizes the steps needed to integrate the default activity indicator with an ajaxified component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="directive">public</span> <span class="type">class</span> <span class="class">MyComponent</span> <span class="directive">extends</span> WebComponent <span class="directive">implements</span> IAjaxIndicatorAware { <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">private</span> AjaxIndicatorAppender indicatorAppender =
                <span class="keyword">new</span> AjaxIndicatorAppender(); <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">public</span> MyComponent(<span class="predefined-type">String</span> id, IModel&lt;?&gt; model) {
      <span class="local-variable">super</span>(id, model);
      add(indicatorAppender); <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getAjaxIndicatorMarkupId() {
      <span class="keyword">return</span> indicatorAppender.getMarkupId(); <i class="conum" data-value="4"></i><b>(4)</b>
    }

    <span class="comment">// ...</span>
  }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Implement interface IAjaxIndicatorAware</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Instantiate an AjaxIndicatorAppender</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Add the AjaxIndicatorAppender to the component</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Return the markup id obtained from AjaxIndicatorAppender</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If we need to change the default picture used as activity indicator, we can override method <code>getIndicatorUrl()</code> of <code>AjaxIndicatorAppender</code> and return the URL to the desired picture.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ajax_request_attributes_and_call_listeners"><a class="link" href="#_ajax_request_attributes_and_call_listeners">2.5. AJAX Request Attributes and Call Listeners</a></h3>
<div class="paragraph">
<p>Starting from version 6.0 Wicket has introduced two entities which allow us to control how an AJAX request is generated on client side and to specify the custom JavaScript code we want to execute during request handling. These entities are class <code>AjaxRequestAttributes</code> and interface <code>IAjaxCallListener</code>, both placed in package <code>org.apache.wicket.ajax.attributes</code>.</p>
</div>
<div class="paragraph">
<p>AjaxRequestAttributes exposes the attributes used to generate the JavaScript call invoked on client side to start an AJAX request. Each attribute will be passed as a "JSON":http://en.wikipedia.org/wiki/JSON parameter to the JavaScript function <code>Wicket.Ajax.ajax</code> which is responsible for sending the concrete AJAX request. Every JSON parameter is identified by a short name. Here is a partial list of the available parameters:</p>
</div>
<div class="paragraph">
<p>{table}
<strong>Short name</strong> | <strong>Description</strong> | <strong>Default value</strong>
u | The callback URL used to serve the AJAX request that will be sent. |
c | The id of the component that wants to start the AJAX call. |
e | A list of event (click, change, etc&#8230;&#8203;) that can trigger the AJAX call. | domready
m | The request method that must be used (GET or POST). | GET
f | The id of the form that must be submitted with the AJAX call. |
mp | If the AJAX call involves the submission of a form, this flag indicates whether the data must be encoded using the encoding mode “multipart/form-data”. | false
sc | The input name of the submitting component of the form |
async | A boolean parameter that indicates if the AJAX call is asynchronous (true) or not. | true
wr | Specifies the type of data returned by the AJAX call (XML, HTML, JSON, etc&#8230;&#8203;). | XML
bh, pre, bsh, ah, sh, fh, coh | This is a list of the listeners that are executed on client side (they are JavaScript scripts) during the lifecycle of an AJAX request. Each short name is the abbreviation of one of the methods defined in the interface IAjaxCallListener (see below). | An empty list
{table}</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A full list of the available request parameters as well as more details on the related JavaScript code can be found at "https://cwiki.apache.org/confluence/ display/WICKET/Wicket+Ajax":https://cwiki.apache.org/confluence/ display/WICKET/Wicket+Ajax .</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Parameters 'u' (callback URL) and 'c' (the id of the component) are generated by the AJAX behavior that will serve the AJAX call and they are not accessible through <code>AjaxRequestAttributes</code>.</p>
</div>
<div class="paragraph">
<p>Here is the final AJAX function generate for the behavior used in example project <code>AjaxEventBehavior</code> Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">Wicket.Ajax.ajax({<span class="key"><span class="delimiter">&quot;</span><span class="content">u</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">./?0-1.IBehaviorListener.0-clickCounterLabel</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span>,
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">clickCounterLabel1</span><span class="delimiter">&quot;</span></span>});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Even if most of the times we will let Wicket generate request attributes for us, both AJAX components and behaviors give us the chance to modify them overriding their method @updateAjaxAttributes (AjaxRequestAttributes attributes)@.</p>
</div>
<div class="paragraph">
<p>One of the attribute we may need to modify is the list of <code>IAjaxCallListeners</code> returned by method <code>getAjaxCallListeners()</code>.</p>
</div>
<div class="paragraph">
<p><code>IAjaxCallListener</code> defines a set of methods which return the JavaScript code (as a <code>CharSequence</code>) that must be executed on client side when the AJAX request handling reaches a given stage:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>getBeforeHandler(Component)</strong>: returns the JavaScript code that will be executed before any other handlers returned by IAjaxCallListener. The code is executed in a scope where it can use variable attrs, which is an array containing the JSON parameters passed to Wicket.Ajax.ajax.</p>
</li>
<li>
<p><strong>getPrecondition(Component)</strong>: returns the JavaScript code that will be used as precondition for the AJAX call. If the script returns false then neither the Ajax call nor the other handlers will be executed. The code is executed in a scope where it can use variable attrs, which is the same variable seen for getBeforeHandler.</p>
</li>
<li>
<p><strong>getBeforeSendHandler(Component)</strong>: returns the JavaScript code that will be executed just before the AJAX call is performed. The code is executed in a scope where it can use variables attrs, jqXHR and settings:</p>
<div class="ulist">
<ul>
<li>
<p>attrs is the same variable seen for getBeforeHandler.</p>
</li>
<li>
<p>jqXHR is the the jQuery XMLHttpRequest object used to make the AJAX call.</p>
</li>
<li>
<p>settings contains the settings used for calling jQuery.ajax().</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>getAfterHandler(Component)</strong>: returns the JavaScript code that will be executed after the AJAX call. The code is executed in a scope where it can use variable attrs, which is the same variable seen before for getBeforeHandler.</p>
</li>
<li>
<p><strong>getSuccessHandler(Component)</strong>: returns the JavaScript code that will be executed if the AJAX call has successfully returned. The code is executed in a scope where it can use variables attrs, jqXHR, data and textStatus:</p>
<div class="ulist">
<ul>
<li>
<p>attrs and jqXHR are same variables seen for getBeforeSendHandler:</p>
</li>
<li>
<p>data is the data returned by the AJAX call. Its type depends on parameter wr (Wicket AJAX response).</p>
</li>
<li>
<p>textStatus it&#8217;s the status returned as text.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>getFailureHandler(Component)</strong>: returns the JavaScript code that will be executed if the AJAX call has returned with a failure. The code is executed in a scope where it can use variable attrs, which is the same variable seen for getBeforeHandler.</p>
</li>
<li>
<p><strong>getCompleteHandler(Component)</strong>: returns the JavaScript that will be invoked after success or failure handler has been executed. The code is executed in a scope where it can use variables attrs, jqXHR and textStatus which are the same variables seen for getSuccessHandler.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the next paragraph we will see an example of custom <code>IAjaxCallListener</code> designed to disable a component during AJAX request processing.</p>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_custom_ajax_call_listener"><a class="link" href="#_create_a_custom_ajax_call_listener">2.6. Create a Custom AJAX Call Listener</a></h3>
<div class="paragraph">
<p>Displaying an activity indicator is a nice way to notify user that an AJAX request is already running, but sometimes is not enough. In some situations we may need to completely disable a component during AJAX request processing, for example when we want to avoid that impatient users submit a form multiple times. In this section we will see how to accomplish this goal building a custom and reusable <code>IAjaxCallListener</code>. The code used in this example is from project <code>CustomAjaxListenerExample</code>.</p>
</div>
<div class="sect3">
<h4 id="_what_we_want_for_our_listener"><a class="link" href="#_what_we_want_for_our_listener">2.6.1. What we want for our listener</a></h4>
<div class="paragraph">
<p>The listener should execute some JavaScript code to disable a given component when the component it is attached to is about to make an AJAX call. Then, when the AJAX request has been completed, the listener should bring back the disabled component to an active state.</p>
</div>
<div class="paragraph">
<p>When a component is disabled it must be clear to user that an AJAX request is running and that he/she must wait for it to complete. To achieve this result we want to disable a given component covering it with a semi-transparent overlay area with an activity indicator in the middle.</p>
</div>
<div class="paragraph">
<p>The final result will look like this:</p>
</div>
<div class="paragraph">
<p>!custom-ajax-call-listener.png!</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_implement_the_listener"><a class="link" href="#_how_to_implement_the_listener">2.6.2. How to implement the listener</a></h4>
<div class="paragraph">
<p>The listener will implement methods <code>getBeforeHandler</code> and <code>getAfterHandler</code>: the first will return the code needed to place an overlay &lt;div&gt; on the desired component while the second must remove this overlay when the AJAX call has completed.</p>
</div>
<div class="paragraph">
<p>To move and resize the overlay area we will use another module from "JQueryUI library":http://jqueryui.com/position/ that allows us to position DOM elements on our page relative to another element.</p>
</div>
<div class="paragraph">
<p>So our listener will depend on four static resources: the JQuery library, the position module of JQuery UI, the custom code used to move the overlay &lt;div&gt; and the picture used as activity indicator. Except for the activity indicator, all these resources must be added to page header section in order to be used.</p>
</div>
<div class="paragraph">
<p>Ajax call listeners can contribute to header section by simply implementing interface <code>IComponentAwareHeaderContributor</code>. Wicket provides adapter class <code>AjaxCallListener</code> that implements both <code>IAjaxCallListener</code> and <code>IComponentAwareHeaderContributor</code>. We will use this class as base class for our listener.</p>
</div>
</div>
<div class="sect3">
<h4 id="_javascript_code"><a class="link" href="#_javascript_code">2.6.3. JavaScript code</a></h4>
<div class="paragraph">
<p>Now that we know what to do on the Java side, let&#8217;s have a look at the custom JavaScript code that must be returned by our listener (file moveHiderAndIndicator.js):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">DisableComponentListener = {
   <span class="function">disableElement</span>: <span class="keyword">function</span>(elementId, activeIconUrl){
      <span class="keyword">var</span> hiderId = elementId + <span class="string"><span class="delimiter">&quot;</span><span class="content">-disable-layer</span><span class="delimiter">&quot;</span></span>;
      <span class="keyword">var</span> indicatorId = elementId + <span class="string"><span class="delimiter">&quot;</span><span class="content">-indicator-picture</span><span class="delimiter">&quot;</span></span>;

      elementId = <span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span> + elementId;
      <span class="comment">//create the overlay &lt;div&gt;</span>
      <span class="predefined">$</span>(elementId).after(<span class="string"><span class="delimiter">'</span><span class="content">&lt;div id=&quot;</span><span class="delimiter">'</span></span> + hiderId
         + <span class="string"><span class="delimiter">'</span><span class="content">&quot; style=&quot;position:absolute;&quot;&gt;</span><span class="delimiter">'</span></span>
         + <span class="string"><span class="delimiter">'</span><span class="content">&lt;img id=&quot;</span><span class="delimiter">'</span></span> + indicatorId +  <span class="string"><span class="delimiter">'</span><span class="content">&quot; src=&quot;</span><span class="delimiter">'</span></span> + activeIconUrl + <span class="string"><span class="delimiter">'</span><span class="content">&quot;/&gt;</span><span class="delimiter">'</span></span>
         + <span class="string"><span class="delimiter">'</span><span class="content">&lt;/div&gt;</span><span class="delimiter">'</span></span>);

      hiderId = <span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span> + hiderId;
      <span class="comment">//set the style properties of the overlay &lt;div&gt;</span>
      <span class="predefined">$</span>(hiderId).css(<span class="string"><span class="delimiter">'</span><span class="content">opacity</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">0.8</span><span class="delimiter">'</span></span>);
      <span class="predefined">$</span>(hiderId).css(<span class="string"><span class="delimiter">'</span><span class="content">text-align</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">center</span><span class="delimiter">'</span></span>);
      <span class="predefined">$</span>(hiderId).css(<span class="string"><span class="delimiter">'</span><span class="content">background-color</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">WhiteSmoke</span><span class="delimiter">'</span></span>);
      <span class="predefined">$</span>(hiderId).css(<span class="string"><span class="delimiter">'</span><span class="content">border</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">1px solid DarkGray</span><span class="delimiter">'</span></span>);
      <span class="comment">//set the dimention of the overlay &lt;div&gt;</span>
      <span class="predefined">$</span>(hiderId).width(<span class="predefined">$</span>(elementId).outerWidth());
      <span class="predefined">$</span>(hiderId).height(<span class="predefined">$</span>(elementId).outerHeight());
      <span class="comment">//positioning the overlay &lt;div&gt; on the component that must be disabled.</span>
      <span class="predefined">$</span>(hiderId).position({<span class="key">of</span>: <span class="predefined">$</span>(elementId),<span class="key">at</span>: <span class="string"><span class="delimiter">'</span><span class="content">top left</span><span class="delimiter">'</span></span>, <span class="key">my</span>: <span class="string"><span class="delimiter">'</span><span class="content">top left</span><span class="delimiter">'</span></span>});

      <span class="comment">//positioning the activity indicator in the middle of the overlay &lt;div&gt;</span>
      <span class="predefined">$</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span> + indicatorId).position({<span class="key">of</span>: <span class="predefined">$</span>(hiderId), <span class="key">at</span>: <span class="string"><span class="delimiter">'</span><span class="content">center center</span><span class="delimiter">'</span></span>,
                                     <span class="key">my</span>: <span class="string"><span class="delimiter">'</span><span class="content">center center</span><span class="delimiter">'</span></span>});
   },
   <span class="comment">//function hideComponent</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Function DisableComponentListener.disableElement places the overlay &lt;div&gt; an the activity indicator on the desired component. The parameters in input are the markup id of the component we want to disable and the URL of the activity indicator picture. These two parameters must be provided by our custom listener.</p>
</div>
<div class="paragraph">
<p>The rest of custom JavaScript contains function DisableComponentListener.hideComponent which is just a wrapper around the JQuery function remove():</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="function">hideComponent</span>: <span class="keyword">function</span>(elementId){
        <span class="keyword">var</span> hiderId = elementId + <span class="string"><span class="delimiter">&quot;</span><span class="content">-disable-layer</span><span class="delimiter">&quot;</span></span>;
        <span class="predefined">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">#</span><span class="delimiter">'</span></span> + hiderId).remove();
        }
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java_class_code"><a class="link" href="#_java_class_code">2.6.4. Java class code</a></h4>
<div class="paragraph">
<p>The code of our custom listener is the following:</p>
</div>
<div class="listingblock">
<div class="title">Java code</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">DisableComponentListener</span> <span class="directive">extends</span> AjaxCallListener {
   <span class="directive">private</span> <span class="directive">static</span> PackageResourceReference customScriptReference = <span class="keyword">new</span>
   PackageResourceReference(DisableComponentListener.class, <span class="string"><span class="delimiter">&quot;</span><span class="content">moveHiderAndIndicator.js</span><span class="delimiter">&quot;</span></span>);

   <span class="directive">private</span> <span class="directive">static</span> PackageResourceReference jqueryUiPositionRef = <span class="keyword">new</span>
   PackageResourceReference(DisableComponentListener.class, <span class="string"><span class="delimiter">&quot;</span><span class="content">jquery-ui-position.min.js</span><span class="delimiter">&quot;</span></span>);

   <span class="directive">private</span> <span class="directive">static</span> PackageResourceReference indicatorReference =
         <span class="keyword">new</span> PackageResourceReference(DisableComponentListener.class, <span class="string"><span class="delimiter">&quot;</span><span class="content">ajax-loader.gif</span><span class="delimiter">&quot;</span></span>);

   <span class="directive">private</span> <span class="predefined-type">Component</span> targetComponent;

   <span class="directive">public</span> DisableComponentListener(<span class="predefined-type">Component</span> targetComponent){
      <span class="local-variable">this</span>.targetComponent = targetComponent;
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">CharSequence</span> getBeforeHandler(<span class="predefined-type">Component</span> component) {
      <span class="predefined-type">CharSequence</span> indicatorUrl = getIndicatorUrl(component);
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">;DisableComponentListener.disableElement('</span><span class="delimiter">&quot;</span></span> + targetComponent.getMarkupId()
              + <span class="string"><span class="delimiter">&quot;</span><span class="content">',</span><span class="delimiter">&quot;</span></span> + <span class="string"><span class="delimiter">&quot;</span><span class="content">'</span><span class="delimiter">&quot;</span></span> + indicatorUrl + <span class="string"><span class="delimiter">&quot;</span><span class="content">');</span><span class="delimiter">&quot;</span></span>;
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="predefined-type">CharSequence</span> getCompleteHandler(<span class="predefined-type">Component</span> component) {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">;DisableComponentListener.hideComponent('</span><span class="delimiter">&quot;</span></span>
                + targetComponent.getMarkupId() + <span class="string"><span class="delimiter">&quot;</span><span class="content">');</span><span class="delimiter">&quot;</span></span>;
   }

   <span class="directive">protected</span> <span class="predefined-type">CharSequence</span> getIndicatorUrl(<span class="predefined-type">Component</span> component) {
      <span class="keyword">return</span> component.urlFor(indicatorReference, <span class="predefined-constant">null</span>);
   }

   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> renderHead(<span class="predefined-type">Component</span> component, IHeaderResponse response) {
      ResourceReference jqueryReference =
      Application.get().getJavaScriptLibrarySettings().getJQueryReference();
      response.render(JavaScriptHeaderItem.forReference(jqueryReference));
      response.render(JavaScriptHeaderItem.forReference(jqueryUiPositionRef));
      response.render(JavaScriptHeaderItem.forReference(customScriptReference) );
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see in the code above we have created a function (<code>getIndicatorUrl</code>) to retrieve the URL of the indicator picture. This was done in order to make the picture customizable by overriding this method.</p>
</div>
<div class="paragraph">
<p>Once we have our listener in place, we can finally use it in our example overwriting method <code>updateAjaxAttributes</code> of the AJAX button that submits the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//...</span>
<span class="keyword">new</span> AjaxButton(<span class="string"><span class="delimiter">&quot;</span><span class="content">ajaxButton</span><span class="delimiter">&quot;</span></span>){
        <span class="annotation">@Override</span>
        <span class="directive">protected</span> <span class="type">void</span> updateAjaxAttributes(AjaxRequestAttributes attributes) {
          <span class="local-variable">super</span>.updateAjaxAttributes(attributes);
          attributes.getAjaxCallListeners().add(<span class="keyword">new</span> DisableComponentListener(form));
        }
}
<span class="comment">//...</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_global_listeners"><a class="link" href="#_global_listeners">2.6.5. Global listeners</a></h4>
<div class="paragraph">
<p>So far we have seen how to use an AJAX call listener to track the AJAX activity of a single component. In addition to these kinds of listeners, Wicket provides also global listeners which are triggered for any AJAX request sent from a page.</p>
</div>
<div class="paragraph">
<p>Global AJAX call events are handled with JavaScript. We can register a callback function for a specific event of the AJAX call lifecycle with function @Wicket.Event.subscribe('&lt;eventName&gt;', &lt;callback Function&gt;)@. The first parameter of this function is the name of the event we want to handle. The possible names are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>'/ajax/call/before': called before any other event handler.</p>
</li>
<li>
<p>'/ajax/call/beforeSend': called just before the AJAX call.</p>
</li>
<li>
<p>'/ajax/call/after': called after the AJAX request has been sent.</p>
</li>
<li>
<p>'/ajax/call/success': called if the AJAX call has successfully returned.</p>
</li>
<li>
<p>'/ajax/call/failure': called if the AJAX call has returned with a failure.</p>
</li>
<li>
<p>'/ajax/call/complete': called when the AJAX call has completed.</p>
</li>
<li>
<p>'/dom/node/removing': called when a component is about to be removed via AJAX. This  happens when component markup is updated via AJAX (i.e. the component itself or one of its containers has been added to <code>AjaxRequestTarget</code>)</p>
</li>
<li>
<p>'/dom/node/added': called when a component has been added via AJAX. Just like '/dom/node/removing', this event is triggered when a component is added to <code>AjaxRequestTarget</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The callback function takes in input the following parameters:  attrs, jqXHR, textStatus, jqEvent and errorThrown. The first three parameters are the same seen before with <code>IAjaxCallListener</code> while jqEvent is an event internally fired by Wicket. The last parameter errorThrown indicates if an error has occurred during the AJAX call.</p>
</div>
<div class="paragraph">
<p>To see a basic example of use of a global AJAX call listener, let&#8217;s go back to our custom datepicker created in chapter 14. When we built it we didn&#8217;t think about a possible use of the component with AJAX.  When a complex component like our datepicker is refreshed via AJAX, the following two side effects can occur:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>After been refreshed, the component loses every JavaScript handler set on it. This is not a problem for our datepicker as it sets a new JQuery datepicker every time is rendered (inside method renderHead).</p>
</li>
<li>
<p>The markup previously created with JavaScript is not removed. For our datepicker this means that the icon used to open the calendar won&#8217;t be removed while a new one will be added each time the component is refreshed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To solve the second unwanted side effect we can register a global AJAX call listener that completely removes the datepicker functionality from our component before it is removed due to an AJAX refresh (which fires event '/dom/node/removing').</p>
</div>
<div class="paragraph">
<p>Project <code>CustomDatepickerAjax</code> contains a new version of our datepicker which adds to its JavaScript file JQDatePicker.js the code needed to register a callback function that gets rid of the JQuery datepicker before the component is removed from the DOM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">Wicket.Event.subscribe(<span class="string"><span class="delimiter">'</span><span class="content">/dom/node/removing</span><span class="delimiter">'</span></span>,
    <span class="keyword">function</span>(jqEvent, attributes, jqXHR, errorThrown, textStatus) {
        <span class="keyword">var</span> componentId = <span class="string"><span class="delimiter">'</span><span class="content">#</span><span class="delimiter">'</span></span> + attributes[<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>];
        <span class="keyword">if</span>(<span class="predefined">$</span>(componentId).datepicker !== <span class="predefined-constant">undefined</span>)
              <span class="predefined">$</span>(componentId).datepicker(<span class="string"><span class="delimiter">'</span><span class="content">destroy</span><span class="delimiter">'</span></span>);
     }
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code above retrieves the id of the component that is about to be removed using parameter attributes. Then it checks if a JQuery datepicker was defined for the given component and if so, it removes the widget calling function destroy.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary"><a class="link" href="#_summary">2.7. Summary</a></h3>
<div class="paragraph">
<p>AJAX is another example of how Wicket can simplify web technologies providing a good component and object oriented abstraction of them.</p>
</div>
<div class="paragraph">
<p>In this chapter we have seen how to take advantage of the AJAX support provided by Wicket to write AJAX-enhanced applications. Most of the chapter has been dedicated to the built-in components and behaviors that let us adopt AJAX without almost any effort.</p>
</div>
<div class="paragraph">
<p>In the final part of the chapter we have seen how Wicket physically implements an AJAX call on client side using AJAX request attributes. Then, we have learnt how to use call listeners to execute custom JavaScript during AJAX request lifecycle.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2014-11-03 10:07:40 CET
</div>
</div>
</body>
</html>